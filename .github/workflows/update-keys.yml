name: Update Keys API

on:
  workflow_dispatch: # Permite rodar manualmente ou via API
    inputs:
      action:
        description: 'create, revoke, delete, list'
        required: true
      payload:
        description: 'JSON payload para ação'
        required: false

jobs:
  keys:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Run keys script
        run: node keys.js
        env:
          ACTION: ${{ github.event.inputs.action }}
          PAYLOAD: ${{ github.event.inputs.payload }}
